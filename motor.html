<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–¥–æ—Ä–æ–≤—å—è</title>
<style>
/* === –¢—ë–º–Ω–∞—è –∏ —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º—ã === */
:root {
  --bg-main: linear-gradient(135deg,#333 0%,#1c1c1c 100%);
  --bg-sidebar: #1b1b1b;
  --bg-container: #212121;
  --bg-section: #282828;
  --bg-card: #333;
  --bg-input: #333;
  --bg-table: #444;
  --bg-table-header: #555;

  --text-main: #ddd;
  --text-secondary: #aaa;
  --text-title: #f0f0f0;
  --text-contrast: #fff;

  --border-color: #666;
  --header-bg: linear-gradient(135deg,#444 0%,#333 100%);

  --btn-bg: linear-gradient(135deg,#4caf50 0%,#388e3c 100%);
  --btn-text: #fff;

  --error-bg: #a60000;
  --error-text: #fff;
}

body.light-theme {
  --bg-main: linear-gradient(135deg,#f2f2f2 0%,#e8e8e8 100%);
  --bg-sidebar: #eaeaea;
  --bg-container: #fff;
  --bg-section: #f9f9f9;
  --bg-card: #f5f5f5;
  --bg-input: #fff;
  --bg-table: #f5f5f5;
  --bg-table-header: #ddd;

  --text-main: #222;
  --text-secondary: #444;
  --text-title: #111;
  --text-contrast: #000;

  --border-color: #bbb;
  --header-bg: linear-gradient(135deg,#ddd 0%,#bbb 100%);

  --btn-bg: linear-gradient(135deg,#2ecc71,#27ae60);
  --btn-text: #fff;

  --error-bg: #ff5555;
  --error-text: #fff;
}

/* –û–±—â–∏–π —Å—Ç–∏–ª—å */
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: var(--bg-main);
  min-height:100vh; padding:20px;
  display:flex;
  color: var(--text-main);
}

/* –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é */
.sidebar {
  width:220px;
  background: var(--bg-sidebar);
  border-radius:10px;
  box-shadow:0 0 15px rgba(0,0,0,0.5);
  padding:15px;
  margin-right:20px;
  height:fit-content;
  position:sticky;
  top:20px;
}
.sidebar h2 {
  font-size:1.3em;
  margin-bottom:10px;
  color: var(--text-title);
  text-align:center;
}
.sidebar ul { list-style:none; }
.sidebar li { margin:8px 0; position:relative; }
.sidebar a {
  display:block;
  padding:10px 12px;
  text-decoration:none;
  color: var(--text-main);
  border-radius:8px;
  transition:background .3s, color .3s;
}
.sidebar a:hover {
  background: var(--bg-card);
  color: var(--text-contrast);
}
.dropdown > a::after {
  content:"‚ñº";
  float:right;
  font-size:0.8em;
  transition:transform .3s;
}
.dropdown.open > a::after { transform:rotate(-180deg); }
.dropdown ul { display:none; margin-left:10px; }
.dropdown.open ul { display:block; }
.dropdown ul a {
  font-size:0.9em;
  background: var(--bg-section);
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.container {
  flex:1;
  max-width:1200px;
  background: var(--bg-container);
  border-radius:15px; 
  box-shadow:0 10px 30px rgba(0,0,0,0.7); 
  overflow:hidden;
}
.header {
  background: var(--header-bg);
  color: var(--text-title);
  padding:30px; text-align:center;
  border-bottom:2px solid var(--border-color);
}
.header h1 { font-size:2.2em; margin-bottom:10px; }
.header p { font-size:1.1em; opacity:0.9; }

/* –ò–Ω–ø—É—Ç—ã */
.input-section { padding:30px; background: var(--bg-section); position:relative; }
.input-grid {
  display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;
  margin-bottom:30px;
}
.input-group {
  background: var(--bg-card);
  padding:20px; border-radius:10px;
  box-shadow:0 2px 10px rgba(0,0,0,0.5);
}
.input-group label {
  display:block; font-weight:bold; margin-bottom:10px;
  color: var(--text-secondary); font-size:1em;
}
.input-group input {
  width:100%; padding:12px;
  border:2px solid var(--border-color);
  border-radius:8px; font-size:16px;
  background: var(--bg-input);
  color: var(--text-main);
  transition:border-color .3s;
}
.input-group input:focus { outline:none; border-color:#4caf50; }

/* –û—à–∏–±–∫–∞ */
#error-message {
  opacity:0;
  background-color: var(--error-bg);
  color: var(--error-text);
  padding:12px; margin-bottom:20px;
  border-radius:5px; text-align:center;
  max-width:600px; margin-left:auto; margin-right:auto;
  transition: opacity .4s ease-in-out;
  pointer-events:none; user-select:none;
  box-shadow: 0 0 15px rgba(180,0,0,0.9);
  position:relative;
}
#error-message.show { opacity:1; pointer-events:auto; user-select:auto; }

/* –ö–Ω–æ–ø–∫–∏ */
.calculate-btn {
  background: var(--btn-bg);
  color: var(--btn-text);
  border:none; padding:15px 30px;
  font-size:18px; border-radius:8px;
  cursor:pointer; transition:transform .2s;
  display:block; margin:0 auto;
  background: linear-gradient(135deg,#a60000,#6b0000);
}
.calculate-btn:hover { transform:translateY(-2px); }

/* –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ */
.clear-btn {
  background: linear-gradient(135deg,#777,#555);
  color: #fff;
  border: none;
  padding: 15px 30px;
  font-size: 16px;
  border-radius: 8px;
  cursor: pointer;
  transition: transform .2s, filter .2s;
}
.clear-btn:hover { transform: translateY(-2px); filter: brightness(1.05); }

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–µ–π—Å—Ç–≤–∏–π (–¥–≤–µ –∫–Ω–æ–ø–∫–∏ —Ä—è–¥–æ–º) */
.actions {
  display:flex;
  gap:10px;
  justify-content:center;
  align-items:center;
  flex-wrap:wrap;
  margin-top:10px;
}
.actions .calculate-btn { margin:0; display:inline-block; }

/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
.results {
  padding:30px;
  background: var(--bg-card);
  border-radius:10px;
  margin:20px;
}

/* === –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å—Ç–∏–ª—å —Ç–∞–±–ª–∏—Ü—ã === */
.results table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 10px; /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏ */
  margin-top: 20px;
}
.results th {
  background: var(--bg-table-header);
  color: var(--text-contrast);
  padding: 12px;
  border-radius: 12px 12px 0 0;
  font-size: 1.05em;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}
.results td {
  background: var(--bg-table);
  padding: 12px;
  text-align: center;
  border-bottom: 2px solid var(--border-color);
}
.results tr {
  border-radius: 12px;
  overflow: hidden;
  transition: transform .2s, box-shadow .2s;
  border-bottom: 2px solid var(--border-color);
}
.results tr td:first-child {
  border-radius: 12px 0 0 12px;
}
.results tr td:last-child {
  border-radius: 0 12px 12px 0;
  border-bottom: 2px solid var(--border-color);

}
.results tr:hover td {
  background: rgba(76,175,80,0.15); /* –ª—ë–≥–∫–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

/* –ö–Ω–æ–ø–∫–∞ —Ç–µ–º—ã */
.theme-toggle {
  position: fixed;
  left: 20px; bottom: 20px;
  background: #444;
  color: white;
  border: none;
  border-radius: 50%;
  width: 50px; height: 50px;
  cursor: pointer;
  font-size: 1.4em;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 8px rgba(0,0,0,0.4);
  transition: background .3s, transform .2s;
  z-index: 1000;
}
body.light-theme .theme-toggle { background: #ddd; color: #222; }
.theme-toggle:hover { transform: translateY(-2px); }

@media (max-width: 768px) {
  body {
    flex-direction: column;
    padding: 10px;
  }

  .sidebar {
    width: 100%;
    margin: 0 0 15px 0;
    position: relative;
    top: 0;
    border-radius: 12px;
  }

  .container {
    width: 100%;
    margin: 0;
  }

  #error-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -60%);
    z-index: 2000;
    max-width: 90%;
    font-size: 1.1em;
    padding: 16px 22px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.7);
    opacity: 0;
    transition: opacity .4s ease, transform .4s ease;
    pointer-events: none;
  }

  #error-message.show {
    display: block;
    opacity: 1;
    transform: translate(-50%, -50%);
    pointer-events: auto;
  }
</style>
</head>
<body>
<!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
<div class="sidebar">
  <h2>–ú–µ–Ω—é</h2>
  <ul>
    <li><a href='/'>üè† –ì–ª–∞–≤–Ω–∞—è</a></li>
    <li class="dropdown">
      <a href="#">üìÇ –†–∞–∑–¥–µ–ª—ã</a>
      <ul>
        <li><a href='/gum'>–ú–æ—ë —Ç–µ–ª–æ - –∂–µ–ª–µ–∑–æ</a></li>
        <li><a href='/osanka'>–ü–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫ - —Ç–∏—Ç–∞–Ω</a></li>
        <li><a href='/motor'>–°–µ—Ä–¥—Ü–µ - –º–æ—Ç–æ—Ä</a></li>
      </ul>
    </li>
    <li><a href='/about'>‚ÑπÔ∏è –û –ø—Ä–æ–µ–∫—Ç–µ</a></li>
  </ul>
</div>

<div class="container">
  <div class="header">
    <h1>‚ù§Ô∏è –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–¥–æ—Ä–æ–≤—å—è</h1>
    <p>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø—É–ª—å—Å–æ–≤—ã—Ö –∑–æ–Ω –∏ –ò–ú–¢</p>
  </div>

  <div class="input-section">
    <div id="error-message">–û—à–∏–±–∫–∞</div>

    <div class="input-grid">
      <div class="input-group">
        <label for="hrrest">–ü—É–ª—å—Å –ø–æ–∫–æ—è (—É–¥/–º–∏–Ω):</label>
        <input type="number" id="hrrest" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 70" />
      </div>
      <div class="input-group">
        <label for="age">–í–æ–∑—Ä–∞—Å—Ç:</label>
        <input type="number" id="age" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç" />
      </div>
      <div class="input-group">
        <label for="weight">–í–µ—Å (–∫–≥):</label>
        <input type="number" id="weight" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å" />
      </div>
      <div class="input-group">
        <label for="height">–†–æ—Å—Ç (—Å–º):</label>
        <input type="number" id="height" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ä–æ—Å—Ç" />
      </div>
    </div>

    <div class="actions">
      <button class="calculate-btn" onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
      <button class="clear-btn" onclick="clearData()">–û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
    </div>
  </div>

  <div class="results" id="result" style="display:none;"></div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ —Ç–µ–º—ã -->
<button class="theme-toggle" onclick="toggleTheme()">üåô</button>

<script>
/* === –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã === */
function toggleTheme() {
  document.body.classList.toggle("light-theme");
  const isLight = document.body.classList.contains("light-theme");
  localStorage.setItem("theme", isLight ? "light" : "dark");
  document.querySelector(".theme-toggle").textContent = isLight ? "‚òÄÔ∏è" : "üåô";
}
(function restoreTheme(){
  const theme = localStorage.getItem("theme");
  if (theme==="light") document.body.classList.add("light-theme");
  document.querySelector(".theme-toggle").textContent = theme==="light" ? "‚òÄÔ∏è" : "üåô";
})();

/* === –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage === */
(function restoreInputs(){
  const placeholders = {
    age: "–í–≤–µ–¥–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç",
    weight: "–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å",
    height: "–í–≤–µ–¥–∏—Ç–µ —Ä–æ—Å—Ç",
    hrrest: "–ù–∞–ø—Ä–∏–º–µ—Ä: 70"
  };
  const fields = Object.keys(placeholders);
  fields.forEach(id => {
    const saved = localStorage.getItem("input_"+id);
    const el = document.getElementById(id);
    if (saved) {
      el.value = saved;
    } else {
      el.placeholder = placeholders[id];
    }
  });
  // –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
  const savedResult = localStorage.getItem("calc_result");
  if(savedResult){
    const resultDiv = document.getElementById("result");
    resultDiv.style.display = "block";
    resultDiv.innerHTML = savedResult;
  }
})();

/* === –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤–≤–æ–¥–µ === */
document.querySelectorAll("#age,#weight,#height,#hrrest").forEach(input=>{
  input.addEventListener("input", ()=>{
    localStorage.setItem("input_"+input.id, input.value);
  });
});

/* === –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ === */
function showError(msg) {
  const err = document.getElementById("error-message");
  err.textContent = msg;
  err.classList.add("show");
  setTimeout(() => err.classList.remove("show"), 2500);
}

/* === –õ–æ–≥–∏–∫–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ === */
function calculate() {
  const age = parseInt(document.getElementById("age").value);
  const weight = parseFloat(document.getElementById("weight").value);
  const height = parseFloat(document.getElementById("height").value) / 100;
  const hrRestInput = parseInt(document.getElementById("hrrest").value);

  let resultDiv = document.getElementById("result");
  resultDiv.innerHTML = "";

  if (!age || !weight || !height || age <= 0 || weight <= 0 || height <= 0) {
    showError("–Ø –¥–ª—è —Ç–µ–±—è —à—É—Ç–∫–∞?");
    return;
  }
  if (age < 5 || age > 120) { showError("–ù—É, –≤–æ—Ç –ø—Ä—è–º–æ —Å—Ç–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç?"); return; }
  if (weight < 20 || weight > 250) { showError("–ß—Ç–æ —Ç—è–∂–µ–ª–µ–µ, –∫–∏–ª–æ–≥—Ä–∞–º–º –ø—É—Ö–∞ –∏–ª–∏...?"); return; }
  if (height < 0.7 || height > 2.5) { showError("–¢—ã –Ω–µ –º–∏–∫—Ä–æ–± –∏ –Ω–µ –≤–µ–ª–∏–∫–∞–Ω!"); return; }
  if (hrRestInput && (hrRestInput < 30 || hrRestInput > 120)) {
    showError("–ù—É, —Ö–æ—Ç—è –±—ã 30-120 —É–¥–∞—Ä–æ–≤!");
    return;
  }

  const hrRest = hrRestInput && hrRestInput > 30 && hrRestInput < 120 ? hrRestInput : 70;
  const hrMax220 = 220 - age;
  const hrMaxTanaka = 208 - 0.7 * age;
  const hrMaxRange = `${Math.round(hrMaxTanaka - 5)} ‚Äì ${Math.round(hrMaxTanaka + 5)}`;

  const bmi = (weight / (height * height)).toFixed(1);
  let bmiCategory = "";
  if (bmi < 18.5) bmiCategory = "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –≤–µ—Å";
  else if (bmi < 25) bmiCategory = "–ù–æ—Ä–º–∞ ‚úÖ";
  else if (bmi < 30) bmiCategory = "–ò–∑–±—ã—Ç–æ—á–Ω—ã–π –≤–µ—Å";
  else bmiCategory = "–û–∂–∏—Ä–µ–Ω–∏–µ ‚ö†Ô∏è";

  const zones = [
    { name: "–õ—ë–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (50‚Äì60%)", min: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.5), max: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.6) },
    { name: "–ê—ç—Ä–æ–±–Ω–∞—è –∑–æ–Ω–∞ (60‚Äì70%)", min: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.6), max: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.7) },
    { name: "–ê–Ω–∞—ç—Ä–æ–±–Ω—ã–π –ø–æ—Ä–æ–≥ (70‚Äì80%)", min: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.7), max: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.8) },
    { name: "VO‚ÇÇmax (80‚Äì90%)", min: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.8), max: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.9) },
    { name: "–ö—Ä–∞—Å–Ω–∞—è –∑–æ–Ω–∞ (90‚Äì100%)", min: Math.round(hrRest + (hrMaxTanaka - hrRest) * 0.9), max: Math.round(hrMaxTanaka) }
  ];

  let html = `
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
    <p><b>–ú–∞–∫—Å. –ø—É–ª—å—Å (220-–≤–æ–∑—Ä–∞—Å—Ç):</b> ${hrMax220} —É–¥/–º–∏–Ω</p>
    <p><b>–ú–∞–∫—Å. –ø—É–ª—å—Å (Tanaka):</b> ${Math.round(hrMaxTanaka)} —É–¥/–º–∏–Ω (–¥–∏–∞–ø–∞–∑–æ–Ω: ${hrMaxRange})</p>
    <p><b>–ü—É–ª—å—Å –ø–æ–∫–æ—è (HRrest):</b> ${hrRest} —É–¥/–º–∏–Ω</p>
    <p><b>–í–∞—à –ò–ú–¢:</b> ${bmi} (${bmiCategory})</p>
    <h3>–ü—É–ª—å—Å–æ–≤—ã–µ –∑–æ–Ω—ã (–ø–æ —Ñ–æ—Ä–º—É–ª–µ –ö–∞—Ä–≤–æ–Ω–µ–Ω–∞)</h3>
    <table>
      <tr><th>–ó–æ–Ω–∞</th><th>–î–∏–∞–ø–∞–∑–æ–Ω (—É–¥/–º–∏–Ω)</th></tr>
  `;
  zones.forEach(z => {
    html += `<tr><td>${z.name}</td><td>${z.min} ‚Äì ${z.max}</td></tr>`;
  });
  html += "</table>";

  resultDiv.style.display = "block";
  resultDiv.innerHTML = html;

  // —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  localStorage.setItem("calc_result", html);
}

/* === –û—á–∏—Å—Ç–∫–∞ localStorage, –ø–æ–ª–µ–π –∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ === */
function clearData(){
  const placeholders = {
    age: "–í–≤–µ–¥–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç",
    weight: "–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å",
    height: "–í–≤–µ–¥–∏—Ç–µ —Ä–æ—Å—Ç",
    hrrest: "–ù–∞–ø—Ä–∏–º–µ—Ä: 70"
  };
  const fields = Object.keys(placeholders);
  fields.forEach(id=>{
    localStorage.removeItem("input_"+id);
    const el = document.getElementById(id);
    if (el) {
      el.value = "";
      el.placeholder = placeholders[id];
    }
  });
  localStorage.removeItem("calc_result");
  const resultDiv = document.getElementById("result");
  resultDiv.style.display = "none";
  resultDiv.innerHTML = "";
}

/* === –î—Ä–æ–ø–¥–∞—É–Ω—ã –±–æ–∫–æ–≤–æ–≥–æ –º–µ–Ω—é === */
document.querySelectorAll(".dropdown > a").forEach(el => {
  el.addEventListener("click", e => {
    e.preventDefault();
    el.parentElement.classList.toggle("open");
  });
});
</script>

</body>
</html>



